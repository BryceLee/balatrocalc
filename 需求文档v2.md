# Balatro 手牌分数计算工具 - 需求文档

## 1. 项目概述

### 1.1 项目目标
开发一个Web应用，为Balatro游戏玩家提供精确的手牌分数计算服务，帮助玩家优化游戏策略。

### 1.2 目标用户
- Balatro游戏玩家
- 想要学习和理解游戏机制的新手玩家
- 需要快速验证手牌得分的资深玩家

## 2. 核心功能需求

### 2.1 手牌输入功能
- **卡牌选择器**: 用户可以从标准52张牌中选择手牌
- **视觉化卡牌**: 清晰显示花色和点数
- **快速输入**: 支持键盘快捷键或拖拽操作
- **手牌验证**: 确保选择的卡牌组合有效

### 2.2 分数计算引擎
- **基础手牌类型识别**:
  - 高牌（High Card）
  - 对子（Pair）
  - 两对（Two Pair）
  - 三条（Three of a Kind）
  - 顺子（Straight）
  - 同花（Flush）
  - 葫芦（Full House）
  - 四条（Four of a Kind）
  - 同花顺（Straight Flush）
  - 皇家同花顺（Royal Flush）

- **Balatro特殊规则处理**:
  - Joker卡效果计算
  - 特殊牌型加成
  - 连击（Mult）系统
  - 筹码（Chips）系统
  - 各种增益效果

### 2.3 结果展示功能
- **详细分数分解**: 显示基础分数、乘数、最终得分
- **计算过程**: 展示每一步的计算逻辑
- **最优建议**: 基于当前手牌给出最佳打牌策略
- **历史记录**: 保存计算历史供用户查看

### 2.4 辅助功能
- **手牌比较**: 比较多个手牌组合的得分
- **概率计算**: 计算特定手牌出现的概率
- **策略提示**: 根据当前局面给出建议
- **规则说明**: 详细的游戏规则和计分说明

## 3. 技术需求

### 3.1 前端技术栈
- **框架**: React/Vue.js 或 Next.js
- **样式**: Tailwind CSS 或 Styled Components
- **状态管理**: Redux/Zustand 或 Context API
- **UI组件库**: 自定义卡牌组件

### 3.2 核心算法要求
- **高性能**: 实时计算，响应时间 < 100ms
- **准确性**: 100%准确的分数计算
- **可扩展**: 支持后续添加新的游戏模式和规则

### 3.3 部署要求
- **静态网站**: 支持静态部署（Vercel、Netlify等）
- **响应式设计**: 支持桌面和移动端
- **PWA支持**: 可离线使用

## 4. 用户界面设计

### 4.1 主界面布局
```
+----------------------------------+
|           标题栏                  |
+----------------------------------+
|  卡牌选择区域                     |
|  [♠A] [♥K] [♦Q] [♣J] [♠10]      |
+----------------------------------+
|  手牌类型: 皇家同花顺              |
|  基础分数: 100                   |
|  乘数: 8x                        |
|  最终得分: 800                   |
+----------------------------------+
|  计算详情 | 历史记录 | 规则说明    |
+----------------------------------+
```

### 4.2 交互设计
- **直观操作**: 点击选择卡牌，自动计算
- **实时反馈**: 选择卡牌时实时显示结果
- **清晰提示**: 明确的状态提示和错误信息

## 5. 数据结构设计

### 5.1 卡牌数据结构
```javascript
{
  suit: 'spades' | 'hearts' | 'diamonds' | 'clubs',
  rank: 'A' | '2' | '3' | ... | 'K',
  value: number, // 用于计算的数值
  id: string // 唯一标识
}
```

### 5.2 手牌类型数据结构
```javascript
{
  type: string, // 手牌类型名称
  baseScore: number, // 基础分数
  multiplier: number, // 乘数
  description: string // 描述
}
```

## 6. 开发阶段规划

### 阶段一：基础功能（1-2周）
- [x] 项目初始化和环境搭建
- [ ] 基础UI框架搭建
- [ ] 卡牌选择器实现
- [ ] 基本手牌类型识别

### 阶段二：核心计算（1-2周）
- [ ] 完整的分数计算引擎
- [ ] 结果展示界面
- [ ] 计算详情展示

### 阶段三：增强功能（1周）
- [ ] 历史记录功能
- [ ] 手牌比较功能
- [ ] 响应式设计优化

### 阶段四：完善和部署（1周）
- [ ] 性能优化
- [ ] 测试和调试
- [ ] 部署上线

## 7. 成功指标

### 7.1 功能指标
- 支持所有标准扑克手牌类型识别
- 计算准确率 100%
- 响应时间 < 100ms

### 7.2 用户体验指标
- 界面直观易用
- 移动端适配良好
- 加载时间 < 2秒

### 7.3 技术指标
- 代码覆盖率 > 90%
- 无严重性能问题
- 支持主流浏览器

## 8. 未来扩展计划

- 支持多人对战模式
- 添加AI对手
- 游戏统计和分析功能
- 社交分享功能
- 多语言支持

---

**文档版本**: v1.0  
**创建日期**: 2025-08-26  
**最后更新**: 2025-08-26